<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Web Scraper Testing Ground</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="/normalize.css" />
    <link rel="stylesheet" href="/main.css" />
  </head>
  <body>
    <div id="topbar"></div>
    <a href="/" style="text-decoration: none">
      <div id="title">WEB SCRAPER TESTING GROUND</div>
      <div id="logo"></div>
    </a>
    <div id="content">
      <h1>AJAX</h1>
      <div id="caseinfo">
        Today many websites load their content using
        <a
          href="https://en.wikipedia.org/wiki/Ajax_(programming)"
          target="_blank"
          >AJAX</a
        >
        (Asynchronous JavaScript and XML). This often greatly improves user
        experience but also may become a stumbling block for some web scrapers.
        At the same time a good web scraper should be able to parse all major
        data formats that are used in AJAX technology:
        <a href="http://en.wikipedia.org/wiki/HTML" target="_blank">HTML</a>,
        <a href="http://en.wikipedia.org/wiki/XML" target="_blank">XML</a> and
        <a href="http://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a>.
        <p></p>
        <p>You may use this test to check scraper's ability to:</p>
        <ol>
          <li>Receive HTML via AJAX and parse it</li>
          <li>Receive XML via AJAX and parse it</li>
          <li>Receive JSON via AJAX and parse it</li>
        </ol>
        <p>How does it work:</p>
        <ul>
          <li>
            The browser receives three lists of three names through AJAX in
            three different formats: HTML, XML and JSON
          </li>
          <li>HTML data is received automatically as the page is loaded</li>
          <li>
            To receive XML and JSON data you need to click to a corresponding
            link
          </li>
          <li>The scraper should be able to extract all nine names</li>
        </ul>
      </div>

      <hr />

      <div id="case_ajax">
        <h3>HTML</h3>
        <div id="ajaxHtml" class="case">
          <ul>
            <li>Tom</li>
            <li>Andrew</li>
            <li>Bob</li>
          </ul>
        </div>
        <h3>XML</h3>
        <div id="ajaxXml" class="case">
          <a href="#" onclick="getXml ();return false;"
            >Click to get XML through AJAX</a
          >
        </div>
        <h3>JSON</h3>
        <div id="ajaxJson" class="case">
          <a href="#" onclick="getJson ();return false;"
            >Click to get JSON through AJAX</a
          >
        </div>
      </div>
      <br /><br /><br />

      <script>
        $(document).ready(function() {
          $("#ajaxHtml").load("ajax?mode=html");
        });

        function getXml() {
          $.get("ajax?mode=xml", function(data) {
            xmlDoc = $.parseXML(data);
            xml = $(xmlDoc);
            var html = "<ul>";
            xml.find("name").each(function() {
              html += "<li>" + $(this).text() + "</li>";
            });
            $("#ajaxXml").html(html + "</ul>");
          });
        }

        function getJson() {
          $.getJSON("ajax?mode=json", function(data) {
            var html = "<ul>";
            $.each(data.names, function(key, val) {
              html += "<li>" + val + "</li>";
            });
            $("#ajaxJson").html(html + "</ul>");
          });
        }
      </script>
    </div>
  </body>
</html>
